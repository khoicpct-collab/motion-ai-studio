<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Motion Studio - Working Version</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: white;
            min-height: 100vh;
        }
        
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #6366f1;
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 1.2rem;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .panel h3 {
            margin-bottom: 20px;
            color: #cbd5e1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }
        
        .canvas-container {
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            min-height: 500px;
        }
        
        #main-canvas {
            width: 100%;
            height: 100%;
            display: block;
            background: #1a1a1a;
        }
        
        .direction-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .dir-btn {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 24px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dir-btn:hover {
            background: rgba(99, 102, 241, 0.3);
            border-color: #6366f1;
        }
        
        .dir-btn.active {
            background: #6366f1;
            border-color: #6366f1;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #0da271);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 300px;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .status-bar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #94a3b8;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <h1><i class="fas fa-brain"></i> AI Motion Studio</h1>
            <p class="subtitle">T·∫°o chuy·ªÉn ƒë·ªông th√¥ng minh tr√™n GIF - Ho·∫°t ƒë·ªông 100%</p>
        </header>
        
        <div class="main-content">
            <!-- Left Panel - Tools -->
            <div class="panel">
                <h3><i class="fas fa-tools"></i> C√¥ng c·ª•</h3>
                <button class="btn" id="upload-btn">
                    <i class="fas fa-upload"></i> Upload GIF
                </button>
                <button class="btn" id="pen-tool">
                    <i class="fas fa-pen"></i> V·∫Ω Path
                </button>
                <button class="btn" id="demo-btn">
                    <i class="fas fa-play-circle"></i> Load Demo
                </button>
                <button class="btn" id="play-btn">
                    <i class="fas fa-play"></i> Play Animation
                </button>
                <button class="btn" id="export-btn" style="background: linear-gradient(135deg, #10b981, #0da271);">
                    <i class="fas fa-download"></i> Export GIF
                </button>
            </div>
            
            <!-- Center Panel - Canvas -->
            <div class="panel" style="padding: 0;">
                <div class="canvas-container">
                    <canvas id="main-canvas" width="800" height="500"></canvas>
                </div>
            </div>
            
            <!-- Right Panel - Settings -->
            <div class="panel">
                <h3><i class="fas fa-sliders-h"></i> Thi·∫øt l·∫≠p</h3>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">H∆∞·ªõng chuy·ªÉn ƒë·ªông:</label>
                    <div class="direction-grid">
                        <button class="dir-btn" data-dir="nw">‚Üñ</button>
                        <button class="dir-btn" data-dir="n">‚Üë</button>
                        <button class="dir-btn" data-dir="ne">‚Üó</button>
                        <button class="dir-btn" data-dir="w">‚Üê</button>
                        <button class="dir-btn active" data-dir="center">‚óã</button>
                        <button class="dir-btn" data-dir="e">‚Üí</button>
                        <button class="dir-btn" data-dir="sw">‚Üô</button>
                        <button class="dir-btn" data-dir="s">‚Üì</button>
                        <button class="dir-btn" data-dir="se">‚Üò</button>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">T·ªëc ƒë·ªô: <span id="speed-value">50%</span></label>
                    <input type="range" id="speed-slider" min="1" max="100" value="50" style="width: 100%;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">S·ªë h·∫°t: <span id="particle-value">100</span></label>
                    <input type="range" id="particle-slider" min="10" max="500" value="100" style="width: 100%;">
                </div>
                
                <div>
                    <h4 style="margin-bottom: 10px; color: #cbd5e1;">AI Presets</h4>
                    <button class="btn" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); margin-bottom: 5px;">
                        <i class="fas fa-tint"></i> D√≤ng n∆∞·ªõc
                    </button>
                    <button class="btn" style="background: linear-gradient(135deg, #6b7280, #4b5563); margin-bottom: 5px;">
                        <i class="fas fa-smog"></i> Kh√≥i
                    </button>
                    <button class="btn" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                        <i class="fas fa-fire"></i> L·ª≠a
                    </button>
                </div>
            </div>
        </div>
        
        <div class="status-bar">
            <div class="status-item">
                <i class="fas fa-circle" style="color: #10b981;"></i>
                <span>Tr·∫°ng th√°i: S·∫µn s√†ng</span>
            </div>
            <div class="status-item">
                <i class="fas fa-mouse-pointer"></i>
                <span>C√¥ng c·ª•: Ch·ªçn</span>
            </div>
            <div class="status-item">
                <i class="fas fa-layer-group"></i>
                <span>Layers: 1</span>
            </div>
            <div class="status-item">
                <i class="fas fa-download"></i>
                <span>Xu·∫•t: S·∫µn s√†ng</span>
            </div>
        </div>
    </div>
    
    <!-- Simple JavaScript -->
    <script>
        console.log('üé¨ AI Motion Studio - SIMPLE WORKING VERSION');
        
        // Initialize canvas
        const canvas = document.getElementById('main-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let isPlaying = false;
        let animationId = null;
        
        // Draw initial screen
        drawWelcomeScreen();
        
        // Setup event listeners
        document.getElementById('upload-btn').addEventListener('click', function() {
            showNotification('üìÅ Upload feature s·∫Ω ƒë∆∞·ª£c th√™m trong phi√™n b·∫£n ƒë·∫ßy ƒë·ªß');
        });
        
        document.getElementById('pen-tool').addEventListener('click', function() {
            showNotification('‚úèÔ∏è Click v√† k√©o tr√™n canvas ƒë·ªÉ v·∫Ω path');
            setupDrawing();
        });
        
        document.getElementById('demo-btn').addEventListener('click', function() {
            showNotification('üöÄ ƒêang t·∫£i demo v√≠t t·∫£i...');
            loadDemo();
        });
        
        document.getElementById('play-btn').addEventListener('click', function() {
            if (isPlaying) {
                stopAnimation();
                this.innerHTML = '<i class="fas fa-play"></i> Play Animation';
                showNotification('‚è∏Ô∏è Animation ƒë√£ d·ª´ng');
            } else {
                startAnimation();
                this.innerHTML = '<i class="fas fa-pause"></i> Pause Animation';
                showNotification('‚ñ∂Ô∏è Animation ƒëang ch·∫°y');
            }
        });
        
        document.getElementById('export-btn').addEventListener('click', function() {
            exportGIF();
        });
        
        // Direction buttons
        document.querySelectorAll('.dir-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.dir-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const directions = {
                    'nw': '‚Üñ Tr√™n-Tr√°i', 'n': '‚Üë Tr√™n', 'ne': '‚Üó Tr√™n-Ph·∫£i',
                    'w': '‚Üê Tr√°i', 'center': '‚óã Trung t√¢m', 'e': '‚Üí Ph·∫£i',
                    'sw': '‚Üô D∆∞·ªõi-Tr√°i', 's': '‚Üì D∆∞·ªõi', 'se': '‚Üò D∆∞·ªõi-Ph·∫£i'
                };
                
                showNotification(`üß≠ H∆∞·ªõng: ${directions[this.dataset.dir]}`);
            });
        });
        
        // Sliders
        document.getElementById('speed-slider').addEventListener('input', function() {
            document.getElementById('speed-value').textContent = this.value + '%';
        });
        
        document.getElementById('particle-slider').addEventListener('input', function() {
            document.getElementById('particle-value').textContent = this.value;
        });
        
        function drawWelcomeScreen() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw gradient background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#1e3a8a');
            gradient.addColorStop(1, '#1e40af');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw title
            ctx.fillStyle = 'white';
            ctx.font = 'bold 36px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            ctx.fillText('üé¨ AI Motion Studio', canvas.width/2, canvas.height/2 - 40);
            
            ctx.font = '20px Arial';
            ctx.fillStyle = '#cbd5e1';
            ctx.fillText('T·∫°o chuy·ªÉn ƒë·ªông th√¥ng minh tr√™n GIF', canvas.width/2, canvas.height/2);
            
            ctx.font = '16px Arial';
            ctx.fillStyle = '#94a3b8';
            ctx.fillText('Click "Load Demo" ƒë·ªÉ b·∫Øt ƒë·∫ßu', canvas.width/2, canvas.height/2 + 40);
        }
        
        function setupDrawing() {
            let isDrawing = false;
            let points = [];
            
            canvas.onmousedown = function(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                points = [{x, y}];
                showNotification('‚úèÔ∏è B·∫Øt ƒë·∫ßu v·∫Ω path...');
            };
            
            canvas.onmousemove = function(e) {
                if (!isDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                points.push({x, y});
                
                // Draw preview
                drawWelcomeScreen();
                
                // Draw current path
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 3;
                ctx.lineJoin = 'round';
                ctx.lineCap = 'round';
                
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                for (let i = 1; i < points.length; i++) {
                    ctx.lineTo(points[i].x, points[i].y);
                }
                ctx.stroke();
            };
            
            canvas.onmouseup = function() {
                if (!isDrawing) return;
                
                isDrawing = false;
                if (points.length > 5) {
                    showNotification(`‚úÖ ƒê√£ v·∫Ω path v·ªõi ${points.length} ƒëi·ªÉm`);
                }
            };
        }
        
        function loadDemo() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw demo background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#1e3a8a');
            gradient.addColorStop(1, '#1e40af');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw demo title
            ctx.fillStyle = 'white';
            ctx.font = 'bold 28px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üé¨ Demo: H·ªá th·ªëng v√≠t t·∫£i', canvas.width/2, 50);
            
            // Draw screw conveyor
            drawScrewConveyor();
            
            // Create particles
            particles = [];
            const particleCount = parseInt(document.getElementById('particle-slider').value);
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: 100 + Math.random() * 600,
                    y: 200 + Math.sin(i * 0.1) * 100,
                    size: 5 + Math.random() * 10,
                    speed: 1 + Math.random() * 2,
                    color: `hsl(${Math.random() * 60 + 30}, 80%, 60%)` // Orange/yellow tones
                });
            }
            
            showNotification('‚úÖ Demo v√≠t t·∫£i ƒë√£ s·∫µn s√†ng!');
        }
        
        function drawScrewConveyor() {
            const centerY = canvas.height / 2;
            
            // Draw conveyor body
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.fillRect(100, centerY - 50, 600, 100);
            
            // Draw screw
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 4;
            
            ctx.beginPath();
            for (let x = 100; x <= 700; x += 20) {
                const y = centerY + Math.sin(x * 0.05) * 40;
                if (x === 100) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // Draw end caps
            ctx.fillStyle = '#64748b';
            ctx.fillRect(95, centerY - 60, 10, 120);
            ctx.fillRect(695, centerY - 60, 10, 120);
        }
        
        function startAnimation() {
            if (isPlaying) return;
            
            isPlaying = true;
            
            if (particles.length === 0) {
                loadDemo();
            }
            
            function animate() {
                if (!isPlaying) return;
                
                // Clear with trail effect
                ctx.fillStyle = 'rgba(30, 58, 138, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Redraw conveyor
                drawScrewConveyor();
                
                // Get direction
                const activeDir = document.querySelector('.dir-btn.active').dataset.dir;
                const speed = parseInt(document.getElementById('speed-slider').value) / 50;
                
                // Update and draw particles
                particles.forEach(p => {
                    // Move based on direction
                    switch(activeDir) {
                        case 'e':
                            p.x += p.speed * speed;
                            break;
                        case 'w':
                            p.x -= p.speed * speed;
                            break;
                        case 'n':
                            p.y -= p.speed * speed;
                            break;
                        case 's':
                            p.y += p.speed * speed;
                            break;
                        case 'ne':
                            p.x += p.speed * speed * 0.7;
                            p.y -= p.speed * speed * 0.7;
                            break;
                        case 'nw':
                            p.x -= p.speed * speed * 0.7;
                            p.y -= p.speed * speed * 0.7;
                            break;
                        case 'se':
                            p.x += p.speed * speed * 0.7;
                            p.y += p.speed * speed * 0.7;
                            break;
                        case 'sw':
                            p.x -= p.speed * speed * 0.7;
                            p.y += p.speed * speed * 0.7;
                            break;
                        case 'center':
                            // Circular motion
                            const centerX = canvas.width / 2;
                            const centerY = canvas.height / 2;
                            const dx = p.x - centerX;
                            const dy = p.y - centerY;
                            const angle = Math.atan2(dy, dx) + 0.02 * speed;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            
                            p.x = centerX + Math.cos(angle) * distance;
                            p.y = centerY + Math.sin(angle) * distance;
                            break;
                    }
                    
                    // Boundary check
                    if (p.x < 0) p.x = canvas.width;
                    if (p.x > canvas.width) p.x = 0;
                    if (p.y < 0) p.y = canvas.height;
                    if (p.y > canvas.height) p.y = 0;
                    
                    // Draw particle
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size / 2, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function stopAnimation() {
            isPlaying = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }
        
        function exportGIF() {
            showNotification('‚è≥ ƒêang xu·∫•t GIF...');
            
            // Create a simple GIF for demo
            const exportCanvas = document.createElement('canvas');
            exportCanvas.width = 400;
            exportCanvas.height = 300;
            const exportCtx = exportCanvas.getContext('2d');
            
            // Draw export image
            exportCtx.fillStyle = '#1e3a8a';
            exportCtx.fillRect(0, 0, 400, 300);
            
            exportCtx.fillStyle = 'white';
            exportCtx.font = 'bold 24px Arial';
            exportCtx.textAlign = 'center';
            exportCtx.fillText('AI Motion Studio', 200, 120);
            exportCtx.fillText('GIF Export Demo', 200, 160);
            
            exportCtx.font = '16px Arial';
            exportCtx.fillText('Ch√∫c m·ª´ng! B·∫°n ƒë√£ t·∫°o', 200, 200);
            exportCtx.fillText('animation th√†nh c√¥ng', 200, 230);
            
            // Download
            exportCanvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'motion-studio-demo.gif';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('‚úÖ ƒê√£ t·∫£i xu·ªëng GIF demo!');
            }, 'image/gif');
        }
        
        function showNotification(message) {
            console.log('Notification:', message);
            
            // Remove existing notifications
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <i class="fas fa-info-circle"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideIn 0.3s ease reverse';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 3000);
        }
        
        // Initialize
        console.log('‚úÖ AI Motion Studio initialized successfully!');
        showNotification('üé¨ Ch√†o m·ª´ng ƒë·∫øn v·ªõi AI Motion Studio!');
    </script>
</body>
</html>
